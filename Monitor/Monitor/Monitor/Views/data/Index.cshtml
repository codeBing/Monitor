@model Monitor.Models.data

@{
    ViewBag.Title = "Index";
}
<script src="@Url.Content("~/Scripts/addCss.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/ichart.1.2.min.js")" type="text/javascript"></script>


<div class="page-header"><h2>历史数据查询</h2></div>
<div class="row">
    <div class="col-lg-8">
        <div class="col-lg-2">
            奶牛编号
            @Html.DropDownList("cowId")
        </div>
        <div class="col-lg-2">
            天数
            @Html.DropDownList("during")
        </div>
        <div class="col-lg-2">
            阈值
            @Html.DropDownList("threshold")
        </div>
        <div class="col-lg-2">
            粒度
            @Html.DropDownList("grading")
        </div>
    </div>
</div>
<div class="row" style="padding:20px;">
    <div class="col-lg-8">
        <div class="panel panel-default">
            <div class="panel-heading">
                奶牛原始数据曲线
            </div>
            <div class="panel-body" id="canvasDiv">
                @*<text>@ViewBag.data</text>*@
            </div>
        </div>
    </div>
</div>
<div class="row" style="padding:20px;">
    <div class="col-lg-8">
        <div class="panel panel-default">
            <div class="panel-heading">
                奶牛运动量数据曲线
            </div>
            <div class="panel-body">

            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        //var flow = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21];
        var str = "@ViewBag.data";
        ch = new Array;
        ch = str.split(",");
        //var flow=[];
        //str = '';
        //for(var i=0;i<ch.length;i++){
        //    flow.push(ch[i]);
        //    str += ch[i];
        //}
        //alert(str);
        var data = [
                    {
                        name: '',
                        value: ch,
                        color: '#0d8ecf',
                        line_width: 2
                    }
        ];
        //var w = document.all.abc.offsetWidth;
        //var h = a = document.all.abc.offsetHeight;
        //alert(w, h);
        var labels = ["2012-12-01", "2012-12-02", "2012-12-03", "2012-12-04", "2012-12-05", "2012-12-06"];
        
        var line = new iChart.LineBasic2D({
            render: 'canvasDiv',
            data: data,
            align: 'center',
            title: '奶牛原始数据曲线',
            width: 900,
            height: 600,
            sub_option: {
                smooth: true,//平滑曲线
                point_size: 10
            },
            tip: {
                enable: true,
                shadow: true
            },
            legend: {
                enable: false
            },
            crosshair: {
                enable: true,
                line_color: '#62bce9'
            },
            coordinate: {
                width: '90%',
                valid_width: '90%',
                height: 260,
                axis: {
                    color: '#9f9f9f',
                    width: [0, 0, 2, 2]
                },
                grids: {
                    vertical: {
                        way: 'share_alike',
                        value: 12
                    }
                },
                scale: [{
                    position: 'left',
                    start_scale: 0,
                    end_scale: 100,
                    scale_space: 10,
                    scale_size: 2,
                    scale_color: '#9f9f9f'
                }, {
                    position: 'bottom',
                    labels: labels
                }]
            }
        });
        //开始画图
        line.draw();
    });
</script>